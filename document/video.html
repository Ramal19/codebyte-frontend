<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8">
  <title>Kursa bax</title>
  <style>
    body { font-family: sans-serif; background: #f5f5f5; padding: 20px; }
    video { width: 100%; max-width: 800px; display: block; margin: 20px auto; border-radius: 10px; }
    .thumbs img { width: 150px; margin: 5px; cursor: pointer; border-radius: 10px; }
  </style>
</head>
<body>
  <h2 id="course-title"></h2>
  <video id="main-video" controls></video>
  <div class="thumbs" id="video-list"></div>

  <script>
    const post = JSON.parse(localStorage.getItem("selectedPost"));
    if (!post) {
      document.body.innerHTML = "<h3>Kurs tapılmadı</h3>";
    } else {
      document.getElementById("course-title").textContent = post.text;

      const video = document.getElementById("main-video");
      const list = document.getElementById("video-list");

      // ilk videonu göstər
      if (post.videos.length > 0) {
        video.src = `https://codebyte-backend-ibyq.onrender.com/uploads/${post.videos[0]}`;
      }

      // bütün video cover-ləri siyahı kimi göstər
      post.videos.forEach((v, i) => {
        const img = document.createElement("img");
        img.src = `https://codebyte-backend-ibyq.onrender.com/uploads/${post.videoCovers[i] || post.courseCover}`;
        img.addEventListener("click", () => {
          video.src = `https://codebyte-backend-ibyq.onrender.com/uploads/${v}`;
          video.play();
        });
        list.appendChild(img);
      });
    }
  </script>
</body>
</html>
