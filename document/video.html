<!DOCTYPE html>
<html lang="az">

<head>
  <meta charset="UTF-8">
  <title>Kursa bax</title>
  <link rel="stylesheet" href="../style/video.css">
</head>

<body>

  <header>
    <div class="navbar">
      <div class="left-side">
        <div class="logo">
          <img src="../image/codebyteLogoMa.png" alt="Logo" id="logo">
        </div>
        <div class="course-name">
          <h2 id="course-title"></h2>
        </div>
      </div>

      <div class="right-side">
        <div class="progress">

        </div>
        <div class="share">

        </div>
        <div class="menu">

        </div>
      </div>
    </div>
  </header>

  <div class="con">
    <video id="main-video" controls></video>
    <div class="thumbs" id="video-list"></div>

  </div>

  <script>
    const API_URL = "https://codebyte-backend-ibyq.onrender.com";

    const post = JSON.parse(localStorage.getItem("selectedPost"));
    if (!post) {
      document.body.innerHTML = "<h3>Kurs tapılmadı</h3>";
    } else {
      document.getElementById("course-title").textContent = post.text;

      const video = document.getElementById("main-video");
      const list = document.getElementById("video-list");

      if (post.videos.length > 0) {
        video.src = `${API_URL}/uploads/${post.videos[0]}`;
      }

      post.videos.forEach((v, i) => {
        // const img = document.createElement("img");
        // img.src = `http://localhost:3000/uploads/${post.videoCovers[i] || post.courseCover}`;
        const div = document.createElement("div");

        div.innerHTML =
          `
            <img class="img" src ="${API_URL}/uploads/${post.videoCovers[i] || post.courseCover}">
            <h2>${post.videoTitles}</h2>

        `

        // const img = document.querySelectorAll(".img");

        div.style.cssText =
          `
            margin-top: 60px;
            width: 300px;
            height: 150px;
            background-color: red;
            display: flex;
            gap:10px;
        `

        div.addEventListener("click", () => {
          video.src = `${API_URL}/uploads/${v}`;
          video.play();
        });
        list.appendChild(div);
      });
    }

    const logo = document.querySelector(".logo")

    logo.addEventListener("click", () => {

      window.location.href = "../index.html"
    })
  </script>
</body>

</html>