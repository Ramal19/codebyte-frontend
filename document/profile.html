<!DOCTYPE html>
<html lang="az">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeByte - Profil Dashboard</title>
    <link rel="shortcut icon" href="../image/CodeByte.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

    <style>
        :root {
            --primary-color: #2da0fd;
            --primary-light: #4c8cff;
            --text-dark: #333;
            --text-light: #666;
            --bg-light: #f4f7f9;
            --border-color: #e0e0e0;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-light);
            font-family: Arial, sans-serif;
        }

        .profile-container {
            display: flex;
            min-height: 100vh;
        }

        /* --- Sidebar Stili --- */
        .profile-sidebar {
            width: 250px;
            background-color: #fff;
            padding: 20px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
        }

        .user-info-card {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .profile-avatar {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 10px;
            border: 3px solid var(--primary-color);
        }

        .username-display {
            font-size: 1.25em;
            color: var(--text-dark);
        }

        .user-role {
            font-size: 0.9em;
            color: var(--primary-light);
            margin-bottom: 15px;
        }

        .edit-profile-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .edit-profile-btn:hover {
            background-color: var(--primary-light);
        }

        .profile-nav {
            display: flex;
            flex-direction: column;
            padding-top: 20px;
            flex-grow: 1;
            /* Navigasiyanƒ± uzatmaq √º√ß√ºn */
        }

        .nav-item {
            padding: 12px 10px;
            text-decoration: none;
            color: var(--text-light);
            border-radius: 5px;
            margin: 5px 0;
            transition: background-color 0.2s, color 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .nav-item:hover,
        .nav-item.active {
            background-color: var(--primary-color);
            color: white;
        }

        .logout-btn {
            margin-top: auto;
            color: var(--danger-color);
        }

        .logout-btn:hover {
            background-color: var(--danger-color);
            color: white;
        }

        /* --- ∆èsas M…ôzmun Stili --- */
        .profile-content {
            flex-grow: 1;
            padding: 40px;
        }

        .content-section {
            display: none;
            /* Aktiv b√∂lm…ôni g√∂st…ôrm…ôk √º√ß√ºn */
            animation: fadeIn 0.5s;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: var(--text-dark);
            margin-bottom: 25px;
        }

        /* Stat Cards */
        .stat-cards {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .stat-card {
            flex: 1;
            min-width: 200px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .stat-card i {
            font-size: 2em;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: var(--primary-color);
        }

        /* Reytinq Qrafiki */
        .rating-chart-placeholder {
            height: 300px;
            background-color: #fff;
            border: 1px dashed var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
            border-radius: 8px;
            color: var(--text-light);
        }


        /* M…ônim Postlarƒ±m Stili */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .new-post-btn {
            background-color: var(--success-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .new-post-btn:hover {
            background-color: #218838;
        }

        .post-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #fff;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .post-info h3 {
            font-size: 1.1em;
            color: var(--text-dark);
        }

        .post-stats {
            font-size: 0.85em;
            color: var(--text-light);
            margin-top: 5px;
        }

        .post-actions button {
            margin-left: 10px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.1em;
            transition: color 0.2s;
            padding: 5px;
        }

        .post-actions .edit {
            color: var(--primary-color);
        }

        .post-actions .delete {
            color: var(--danger-color);
        }

        .post-actions .view {
            color: var(--warning-color);
        }

        /* Mobil g√∂r√ºn√º≈ü √º√ß√ºn d√ºz…ôli≈ül…ôr */
        @media (max-width: 768px) {
            .profile-container {
                flex-direction: column;
            }

            .profile-sidebar {
                width: 100%;
                padding: 15px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            }

            .profile-nav {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                border-top: 1px solid var(--border-color);
                padding-top: 15px;
            }

            .nav-item {
                flex: 1 1 auto;
                text-align: center;
                justify-content: center;
            }

            .logout-btn {
                margin-top: 5px;
                flex: 1 1 100%;
                /* √áƒ±xƒ±≈ü d√ºym…ôsi yeni s…ôtrd…ô */
            }

            .profile-content {
                padding: 20px 15px;
            }

            .post-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .post-actions {
                margin-top: 10px;
                width: 100%;
                text-align: right;
            }
        }
    </style>
</head>

<body>
    <div class="profile-container">
        <aside class="profile-sidebar">
            <div class="user-info-card">
                <img src="https://via.placeholder.com/90/2da0fd/FFFFFF?text=CB" alt="Profil ≈û…ôkli"
                    class="profile-avatar" id="user-avatar">
                <h2 class="username-display" id="user-username">Cavid_M…ômm…ôdov</h2>
                <p class="user-role" id="user-role">Premium ƒ∞stifad…ô√ßi</p>
                <button class="edit-profile-btn"><i class="bi bi-pencil-square"></i> Profili Redakt…ô Et</button>
            </div>

            <nav class="profile-nav">
                <a href="#dashboard" class="nav-item active"><i class="bi bi-grid-fill"></i> Dashboard</a>
                <a href="#posts" class="nav-item"><i class="bi bi-file-earmark-text-fill"></i> M…ônim Postlarƒ±m</a>
                <a href="#stats" class="nav-item"><i class="bi bi-graph-up"></i> Statistika & Reytinq</a>
                <a href="#settings" class="nav-item"><i class="bi bi-gear-fill"></i> Parametrl…ôr</a>
                <a href="#" class="nav-item logout-btn" id="logout-btn"><i class="bi bi-box-arrow-right"></i> √áƒ±xƒ±≈ü</a>
            </nav>
        </aside>

        <main class="profile-content">
            <section id="dashboard" class="content-section active">
                <h1>üëã Xo≈ü G…ôldin, <span id="welcome-username">Cavid!</span></h1>

                <div class="stat-cards">
                    <div class="stat-card">
                        <i class="bi bi-star-fill rating-icon"></i>
                        <h3>Reytinq Xalƒ±</h3>
                        <p class="stat-value" id="current-rating">1450</p>
                    </div>
                    <div class="stat-card">
                        <i class="bi bi-chat-left-text-fill post-count-icon"></i>
                        <h3>√úmumi Post Sayƒ±</h3>
                        <p class="stat-value" id="total-posts">24</p>
                    </div>
                    <div class="stat-card">
                        <i class="bi bi-trophy-fill rank-icon"></i>
                        <h3>Qlobal Sƒ±ralama</h3>
                        <p class="stat-value" id="global-rank">#123</p>
                    </div>
                </div>

                <h2>Reytinq Performansƒ±</h2>
                <div class="rating-chart-placeholder">
                    <p>Reytinq qrafiki (Chart.js v…ô s. il…ô) burada g√∂st…ôril…ôc…ôk.</p>
                </div>
            </section>

            <section id="posts" class="content-section">
                <div class="section-header">
                    <h2>M…ônim Postlarƒ±m (<span id="post-count-display">24</span>)</h2>
                    <button class="new-post-btn"><i class="bi bi-plus-circle-fill"></i> Yeni Post Yarat</button>
                </div>

                <div class="my-posts-list" id="my-posts-list">
                    <div class="post-item">
                        <div class="post-info">
                            <h3>JavaScript'd…ô Async/Await haqqƒ±nda</h3>
                            <p class="post-stats">üëç 15 | üí¨ 3 | üóì 22.02.2025</p>
                        </div>
                        <div class="post-actions">
                            <button class="action-btn edit" title="Redakt…ô et"><i class="bi bi-pencil"></i></button>
                            <button class="action-btn delete" title="Sil"><i class="bi bi-trash"></i></button>
                            <button class="action-btn view" title="G√∂r√ºn√º≈ü"><i class="bi bi-eye"></i></button>
                        </div>
                    </div>
                    <div class="post-item">
                        <div class="post-info">
                            <h3>Node.js il…ô S√ºr…ôtli REST API</h3>
                            <p class="post-stats">üëç 18 | üí¨ 4 | üóì 15.03.2025</p>
                        </div>
                        <div class="post-actions">
                            <button class="action-btn edit" title="Redakt…ô et"><i class="bi bi-pencil"></i></button>
                            <button class="action-btn delete" title="Sil"><i class="bi bi-trash"></i></button>
                            <button class="action-btn view" title="G√∂r√ºn√º≈ü"><i class="bi bi-eye"></i></button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="stats" class="content-section">
                <h2>∆ètraflƒ± Statistikalar</h2>
                <div class="detailed-stats">
                    <p>Bu hiss…ôd…ô Post n√∂vl…ôrin…ô, ortalama b…ôy…ônm…ô sayƒ±na v…ô s. dair …ôtraflƒ± c…ôdv…ôll…ôr v…ô qrafikl…ôr
                        yerl…ô≈ü…ôc…ôk.</p>
                </div>
            </section>

            <section id="settings" class="content-section">
                <h2>Hesab Parametrl…ôri</h2>
                <form class="settings-form">
                    <p>Bu hiss…ôd…ô istifad…ô√ßi parolunu, e-po√ßtunu v…ô bildiri≈ü parametrl…ôrini idar…ô ed…ô bil…ôr.</p>
                </form>
            </section>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const API_URL = "https://codebyte-backend-ibyq.onrender.com";

            const loginUserString = localStorage.getItem("loginUser");
            const token = localStorage.getItem("token");

            let userData = null;

            if (loginUserString && token) {
                try {
                    userData = JSON.parse(loginUserString);
                } catch (e) {
                    console.error("Local Storage-dakƒ± istifad…ô√ßi m…ôlumatlarƒ± z…ôd…ôl…ônib.");
                }
            }

            // ƒ∞stifad…ô√ßi yoxlanƒ±≈üƒ± v…ô y√∂nl…ôndirm…ô
            if (!token || !userData) {
                // T…ôhl√ºk…ôsizlik s…ôb…ôbi il…ô login s…ôhif…ôsin…ô y√∂nl…ôndiririk
                alert("Z…ôhm…ôt olmasa, …ôvv…ôlc…ô daxil olun.");
                window.location.href = "../login.html";
                return;
            }


            // DOM Elementl…ôri v…ô ƒ∞stifad…ô√ßi M…ôlumatlarƒ±
            const navItems = document.querySelectorAll('.profile-nav .nav-item');
            const contentSections = document.querySelectorAll('.profile-content .content-section');
            const welcomeUsername = document.getElementById('welcome-username');
            const userUsernameDisplay = document.getElementById('user-username');
            const userRoleDisplay = document.getElementById('user-role');
            const logoutBtn = document.getElementById('logout-btn');
            const currentUsername = userData.username;
            const currentRole = userData.role || 'Standart ƒ∞stifad…ô√ßi';
            const userId = userData.id; // ƒ∞ndi id d…ô lazƒ±mdƒ±r!

            // Profil kartƒ±nƒ± v…ô Xo≈ü g…ôldin mesajƒ±nƒ± yenil…ô
            if (userUsernameDisplay) userUsernameDisplay.textContent = currentUsername;
            if (userRoleDisplay) userRoleDisplay.textContent = currentRole;
            if (welcomeUsername) {
                const simpleName = currentUsername.split('_')[0];
                welcomeUsername.textContent = simpleName + '!';
            }


            // ------------------------------------
            // 1. √áIXI≈û (LOGOUT) M∆èNTƒ∞Qƒ∞
            // ------------------------------------
            function handleLogout() {
                localStorage.removeItem("token");
                localStorage.removeItem("loginUser");
                alert("Sistemd…ôn uƒüurla √ßƒ±xƒ±≈ü edildi.");
                window.location.href = "../index.html";
            }

            if (logoutBtn) {
                logoutBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    handleLogout();
                });
            }

            // ------------------------------------
            // 2. NAVƒ∞GASƒ∞YA V∆è M∆èLUMAT Y√úKL∆èM∆è
            // ------------------------------------
            navItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    if (item.id === 'logout-btn') return;

                    e.preventDefault();
                    const targetId = item.getAttribute('href').substring(1);

                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');

                    contentSections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === targetId) {
                            section.classList.add('active');

                            // Y√úKL∆èM∆è M∆èNTƒ∞Qƒ∞
                            if (targetId === 'posts') {
                                loadUserPosts();
                            } else if (targetId === 'stats') {
                                loadStatsAndRatings();
                            }
                        }
                    });
                });
            });

            // ------------------------------------
            // 3. ≈û∆èXSƒ∞ POSTLARI Y√úKL∆èM∆èK
            // ------------------------------------
            async function loadUserPosts() {
                const postsContainer = document.getElementById('my-posts-list');
                const postCountDisplay = document.getElementById('post-count-display');
                postsContainer.innerHTML = '<p class="loading-message">Postlar y√ºkl…ônir...</p>';

                try {
                    const res = await fetch(`${API_URL}/posts/my-posts`, {
                        method: "GET",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": `Bearer ${token}`
                        },
                    });

                    const posts = await res.json();

                    if (res.ok && Array.isArray(posts)) {
                        renderPosts(posts);
                        postCountDisplay.textContent = posts.length;
                    } else {
                        postsContainer.innerHTML = `<p style="color:red;">Postlar y√ºkl…ôn…ôrk…ôn x…ôta: ${posts.message || 'Bilinm…ôy…ôn x…ôta'}</p>`;
                    }

                } catch (error) {
                    console.error("Post y√ºkl…ônm…ôsi x…ôtasƒ±:", error);
                    postsContainer.innerHTML = '<p style="color:red;">Serverl…ô …ôlaq…ô qurulmadƒ±. Z…ôhm…ôt olmasa backend-in i≈ül…ôdiyind…ôn …ômin olun.</p>';
                }
            }

            function renderPosts(posts) {
                const postsContainer = document.getElementById('my-posts-list');
                postsContainer.innerHTML = '';
                if (posts.length === 0) {
                    postsContainer.innerHTML = '<p>H…ôl…ô he√ß bir kurs payla≈üƒ±lmayƒ±b.</p>';
                    return;
                }

                posts.forEach(post => {
                    // T…ôsdiql…ônm…ô statusunu m√º…ôyy…ôn etm…ôk
                    const statusText = post.isApproved ?
                        '<span style="color: var(--success-color); font-weight: bold;">T…ôsdiql…ônib</span>' :
                        '<span style="color: var(--warning-color); font-weight: bold;">Baxƒ±≈üda</span>';

                    const postElement = document.createElement('div');
                    postElement.classList.add('post-item');
                    postElement.innerHTML = `
                <div class="post-info">
                    <h3>${post.text}</h3>
                    <p class="post-stats">üóì ${post.createdAt ? new Date(post.createdAt).toLocaleDateString('az-AZ') : 'Tarix yoxdur'} | Status: ${statusText}</p>
                </div>
                <div class="post-actions">
                    <button class="action-btn edit" data-post-id="${post.id}" title="Redakt…ô et"><i class="bi bi-pencil"></i></button>
                    <button class="action-btn delete" data-post-id="${post.id}" title="Sil"><i class="bi bi-trash"></i></button>
                    <button class="action-btn view" data-post-id="${post.id}" title="G√∂r√ºn√º≈ü"><i class="bi bi-eye"></i></button>
                </div>
            `;
                    postsContainer.appendChild(postElement);
                });

                // Silm…ô hadis…ôl…ôrini …ôlav…ô et
                postsContainer.querySelectorAll('.action-btn.delete').forEach(btn => {
                    btn.addEventListener('click', (e) => handleDeletePost(e.currentTarget.dataset.postId));
                });

                // Buradan View v…ô Edit s…ôhif…ôl…ôrin…ô y√∂nl…ôndirm…ô …ôlav…ô edin
                postsContainer.querySelectorAll('.action-btn.view').forEach(btn => {
                    btn.addEventListener('click', () => window.location.href = `../course-details.html?id=${btn.dataset.postId}`);
                });
            }

            // Kursu silm…ô funksiyasƒ± (backendinizd…ôki DELETE /posts/:id mar≈ürutunu istifad…ô edir)
            async function handleDeletePost(postId) {
                if (!confirm("∆èminsiniz? Bu kursu silm…ôk ist…ôyirsiniz?")) return;

                try {
                    const res = await fetch(`${API_URL}/posts/${postId}`, {
                        method: "DELETE",
                        headers: {
                            "Authorization": `Bearer ${token}`
                        },
                    });

                    const json = await res.json();

                    if (res.ok) {
                        alert(json.message);
                        loadUserPosts(); // Postlarƒ± yenid…ôn y√ºkl…ô
                    } else {
                        alert(`Silinm…ô uƒüursuz oldu: ${json.message}`);
                    }

                } catch (error) {
                    console.error("Post silinm…ô x…ôtasƒ±:", error);
                    alert("Serverl…ô …ôlaq…ô qurulmadƒ±.");
                }
            }


            // ------------------------------------
            // 4. ∆èTRAFLI STATƒ∞STƒ∞KA V∆è REYTƒ∞NQL∆èRƒ∞ Y√úKL∆èM∆èK
            // ------------------------------------
            async function loadStatsAndRatings() {
                const detailedStatsContainer = document.getElementById('stats');
                detailedStatsContainer.innerHTML = '<h2>∆ètraflƒ± Statistikalar</h2><p class="loading-message">Statistika v…ô Reytinql…ôr y√ºkl…ônir...</p>';

                try {
                    // ƒ∞stifad…ô√ßinin verdiyi reytinql…ôri g…ôtir
                    const resRatings = await fetch(`${API_URL}/ratings/my-ratings`, {
                        method: "GET",
                        headers: { "Authorization": `Bearer ${token}` },
                    });
                    const ratings = await resRatings.json();

                    // ƒ∞stifad…ô√ßinin b√ºt√ºn postlarƒ±nƒ± (t…ôsdiql…ônmi≈ü, baxƒ±≈üda) g…ôtir (bu m…ôlumatƒ± loadUserPosts-dan da istifad…ô etm…ôk olar, amma b√ºt√∂vl√ºk √º√ß√ºn yenid…ôn √ßaƒüƒ±rƒ±ram)
                    const resPosts = await fetch(`${API_URL}/posts/my-posts`, {
                        method: "GET",
                        headers: { "Authorization": `Bearer ${token}` },
                    });
                    const userPosts = await resPosts.json();

                    renderDetailedStats(userPosts, ratings);

                } catch (error) {
                    console.error("Statistika y√ºkl…ônm…ôsi x…ôtasƒ±:", error);
                    detailedStatsContainer.innerHTML = '<h2>∆ètraflƒ± Statistikalar</h2><p style="color:red;">M…ôlumatlar y√ºkl…ôn…ôrk…ôn x…ôta ba≈ü verdi.</p>';
                }
            }

            function renderDetailedStats(posts, ratings) {
                const statsSection = document.getElementById('stats');

                // Postlar √º√ß√ºn statistika
                const approvedCount = posts.filter(p => p.isApproved).length;
                const pendingCount = posts.filter(p => !p.isApproved).length;
                const totalPosts = posts.length;

                let statsHTML = `
            <h2>Statistikaya Baxƒ±≈ü</h2>
            <div class="stat-cards">
                <div class="stat-card" style="background-color: #e6f7ff;">
                    <i class="bi bi-file-earmark-check-fill" style="color: #1890ff;"></i>
                    <h3>T…ôsdiql…ônmi≈ü Kurs</h3>
                    <p class="stat-value" style="color: #1890ff;">${approvedCount}</p>
                </div>
                <div class="stat-card" style="background-color: #fffbe6;">
                    <i class="bi bi-clock-history" style="color: #faad14;"></i>
                    <h3>Baxƒ±≈üda olan</h3>
                    <p class="stat-value" style="color: #faad14;">${pendingCount}</p>
                </div>
                <div class="stat-card" style="background-color: #f0f0f0;">
                    <i class="bi bi-bar-chart-fill" style="color: var(--text-dark);"></i>
                    <h3>√úmumi Post</h3>
                    <p class="stat-value" style="color: var(--text-dark);">${totalPosts}</p>
                </div>
            </div>
            
            <h2>Sizin Reytinql…ôriniz (${ratings.length} qeyd)</h2>
            <div class="my-ratings-list" style="max-height: 400px; overflow-y: auto;">
        `;

                if (ratings.length === 0) {
                    statsHTML += '<p>H…ôl…ô he√ß bir kursa reytinq verm…ômisiniz.</p>';
                } else {
                    ratings.forEach(r => {
                        const stars = '‚≠ê'.repeat(r.score) + '‚òÜ'.repeat(5 - r.score);
                        statsHTML += `
                    <div class="post-item" style="display:flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <div class="post-info">
                            <h3 style="font-size: 1em;">${r.courseTitle}</h3>
                            <p class="post-stats">${r.createdAt ? new Date(r.createdAt.seconds * 1000).toLocaleDateString('az-AZ') : 'Tarix yoxdur'}</p>
                        </div>
                        <div style="font-size: 1.2em;">${stars}</div>
                    </div>
                `;
                    });
                }

                statsHTML += `</div>`;
                statsSection.innerHTML = statsHTML;
            }

            // S…ôhif…ô y√ºkl…ôn…ôrk…ôn √ºmumi post sayƒ±nƒ± Dashboard-da g√∂st…ôrm…ôk √º√ß√ºn √ßaƒüƒ±rƒ±lƒ±r
            // Bu funksiya API-d…ôn m…ôlumatlarƒ± asinxron y√ºkl…ôm…ôyi t…ôl…ôb edir.
            // ƒ∞lk y√ºkl…ôm…ô √º√ß√ºn yalnƒ±z Dashbord statistikasƒ±nƒ± yenil…ôm…ôk m…ôqs…ôdi il…ô:
            async function initialLoadDashboardStats() {
                try {
                    const res = await fetch(`${API_URL}/posts/my-posts`, {
                        method: "GET",
                        headers: { "Authorization": `Bearer ${token}` },
                    });
                    const posts = await res.json();

                    if (res.ok && Array.isArray(posts)) {
                        const totalPosts = posts.length;
                        const approvedCount = posts.filter(p => p.isApproved).length;

                        document.getElementById('total-posts').textContent = totalPosts;

                        // Reytinq v…ô Sƒ±ralama m…ôlumatlarƒ± h…ôl…ô ki, static qalƒ±r (API mar≈ürutu yoxdur)
                        document.getElementById('current-rating').textContent = 'API ?'; // Reytinq API-si lazƒ±mdƒ±r
                        document.getElementById('global-rank').textContent = '#?';
                    }
                } catch (e) {
                    console.log("Dashboard ilkin y√ºkl…ônm…ôsi x…ôtasƒ±.");
                }
            }
            initialLoadDashboardStats();
        });
    </script>
</body>

</html>